<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - CSIT314 Project</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="icon" href="content/favicon.ico" type="image/x-icon">
    <script src="/assets/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>

  <body>
    <div id="header"></div>

    <main>
      <br><br><br><br><br><br><br>
      <h1>Main Content</h1>

      <!-- Person Form -->
      <form id="personForm" class="space-y-4">
        <label for="email">Email:</label>
        <input type="email" id="email" required class="border rounded px-4 py-2 w-full">
        
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" required class="border rounded px-4 py-2 w-full">
        
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" required class="border rounded px-4 py-2 w-full">
        
        <label for="password">Password:</label>
        <input type="password" id="password" required class="border rounded px-4 py-2 w-full">
        
        <button type="button" onclick="addPerson()" class="bg-blue-500 text-white px-4 py-2 rounded">Add</button>
      </form>

      <br><br>
      
      <!-- Button to get all people and display them in a table -->
      <button type="button" onclick="getAllPeople()" class="bg-green-500 text-white px-4 py-2 rounded">Get All</button>

      <br><br><br>

      <!-- Table to display all people -->
      <table id="peopleTable" class="w-full table-auto border-collapse border border-gray-300 hidden">
        <thead>
          <tr>
            <th class="border p-2">Email</th>
            <th class="border p-2">First Name</th>
            <th class="border p-2">Last Name</th>
            <th class="border p-2">Password</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </main>

    <div id="footer"></div>

    <script>
      let people = [];

      // Add new person and save to localStorage
      function addPerson() {
        const email = document.getElementById('email').value;
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const password = document.getElementById('password').value;

        // Create person object
        const person = { email, firstName, lastName, password };
        
        // Save to local storage
        people.push(person);
        localStorage.setItem('people', JSON.stringify(people));

        // Clear the form
        document.getElementById('personForm').reset();
        alert('Person added!');
      }

      // Load all people and display in the table
      function getAllPeople() {
        // Retrieve from local storage
        const storedPeople = JSON.parse(localStorage.getItem('people'));
        
        // If no people in storage, show empty table message
        if (!storedPeople || storedPeople.length === 0) {
          alert('No people found');
          return;
        }
        
        // Show the table
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = ''; // Clear existing table data
        storedPeople.forEach(person => {
          const row = document.createElement('tr');
          
          Object.values(person).forEach(value => {
            const cell = document.createElement('td');
            cell.classList.add('border', 'p-2');
            cell.textContent = value;
            row.appendChild(cell);
          });

          tableBody.appendChild(row);
        });

        // Show the table
        document.getElementById('peopleTable').classList.remove('hidden');
      }
    </script>
  </body>
</html>
